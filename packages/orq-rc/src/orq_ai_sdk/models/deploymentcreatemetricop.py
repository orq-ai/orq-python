"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .audiocontentpartschema import (
    AudioContentPartSchema,
    AudioContentPartSchemaTypedDict,
)
from .filecontentpartschema import FileContentPartSchema, FileContentPartSchemaTypedDict
from .imagecontentpartschema import (
    ImageContentPartSchema,
    ImageContentPartSchemaTypedDict,
)
from .reasoningpartschema import ReasoningPartSchema, ReasoningPartSchemaTypedDict
from .redactedreasoningpartschema import (
    RedactedReasoningPartSchema,
    RedactedReasoningPartSchemaTypedDict,
)
from .refusalpartschema import RefusalPartSchema, RefusalPartSchemaTypedDict
from .textcontentpartschema import TextContentPartSchema, TextContentPartSchemaTypedDict
from orq_ai_sdk.types import (
    BaseModel,
    Nullable,
    OptionalNullable,
    UNSET,
    UNSET_SENTINEL,
)
from orq_ai_sdk.utils import (
    FieldMetadata,
    PathParamMetadata,
    RequestMetadata,
    get_discriminator,
)
from pydantic import Discriminator, Tag, model_serializer
from typing import Any, Dict, List, Literal, Optional, Union
from typing_extensions import Annotated, NotRequired, TypeAliasType, TypedDict


class DeploymentCreateMetricUsageTypedDict(TypedDict):
    r"""Usage statistics to add to the deployment"""

    prompt_tokens: float
    r"""Number of tokens in the prompt."""
    completion_tokens: float
    r"""Number of tokens in the generated completion."""
    total_tokens: NotRequired[float]
    r"""Total number of tokens used in the request (prompt + completion)."""


class DeploymentCreateMetricUsage(BaseModel):
    r"""Usage statistics to add to the deployment"""

    prompt_tokens: float
    r"""Number of tokens in the prompt."""

    completion_tokens: float
    r"""Number of tokens in the generated completion."""

    total_tokens: Optional[float] = None
    r"""Total number of tokens used in the request (prompt + completion)."""


class PerformanceTypedDict(TypedDict):
    latency: float
    r"""Total time in milliseconds of the request to the LLM provider API."""
    time_to_first_token: NotRequired[float]
    r"""Total time in milliseconds to generate the first token of the completion."""


class Performance(BaseModel):
    latency: float
    r"""Total time in milliseconds of the request to the LLM provider API."""

    time_to_first_token: Optional[float] = None
    r"""Total time in milliseconds to generate the first token of the completion."""


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Role = Literal[
    "tool",
]
r"""The role of the messages author, in this case tool."""


DeploymentCreateMetricContentDeploymentsMetricsRequest2TypedDict = (
    TextContentPartSchemaTypedDict
)


DeploymentCreateMetricContentDeploymentsMetricsRequest2 = TextContentPartSchema


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5ContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5ContentTypedDict",
    Union[str, List[DeploymentCreateMetricContentDeploymentsMetricsRequest2TypedDict]],
)
r"""The contents of the tool message."""


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Content = (
    TypeAliasType(
        "DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Content",
        Union[str, List[DeploymentCreateMetricContentDeploymentsMetricsRequest2]],
    )
)
r"""The contents of the tool message."""


DeploymentCreateMetricMessagesDeploymentsMetricsType = Literal["ephemeral",]
r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""


DeploymentCreateMetricMessagesTTL = Literal[
    "5m",
    "1h",
]
r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

- `5m`: 5 minutes
- `1h`: 1 hour

Defaults to `5m`. Only supported by `Anthropic` Claude models.
"""


class DeploymentCreateMetricMessagesCacheControlTypedDict(TypedDict):
    type: DeploymentCreateMetricMessagesDeploymentsMetricsType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""
    ttl: NotRequired[DeploymentCreateMetricMessagesTTL]
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetricMessagesCacheControl(BaseModel):
    type: DeploymentCreateMetricMessagesDeploymentsMetricsType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""

    ttl: Optional[DeploymentCreateMetricMessagesTTL] = "5m"
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetricMessagesToolMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Role
    r"""The role of the messages author, in this case tool."""
    content: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5ContentTypedDict
    r"""The contents of the tool message."""
    tool_call_id: Nullable[str]
    r"""Tool call that this message is responding to."""
    cache_control: NotRequired[DeploymentCreateMetricMessagesCacheControlTypedDict]


class DeploymentCreateMetricMessagesToolMessage(BaseModel):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Role
    r"""The role of the messages author, in this case tool."""

    content: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBody5Content
    r"""The contents of the tool message."""

    tool_call_id: Nullable[str]
    r"""Tool call that this message is responding to."""

    cache_control: Optional[DeploymentCreateMetricMessagesCacheControl] = None

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = ["cache_control"]
        nullable_fields = ["tool_call_id"]
        null_default_fields = []

        serialized = handler(self)

        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            serialized.pop(k, None)

            optional_nullable = k in optional_fields and k in nullable_fields
            is_set = (
                self.__pydantic_fields_set__.intersection({n})
                or k in null_default_fields
            )  # pylint: disable=no-member

            if val is not None and val != UNSET_SENTINEL:
                m[k] = val
            elif val != UNSET_SENTINEL and (
                not k in optional_fields or (optional_nullable and is_set)
            ):
                m[k] = val

        return m


DeploymentCreateMetricContentDeploymentsMetrics2TypedDict = TypeAliasType(
    "DeploymentCreateMetricContentDeploymentsMetrics2TypedDict",
    Union[
        RefusalPartSchemaTypedDict,
        RedactedReasoningPartSchemaTypedDict,
        TextContentPartSchemaTypedDict,
        ReasoningPartSchemaTypedDict,
    ],
)


DeploymentCreateMetricContentDeploymentsMetrics2 = Annotated[
    Union[
        Annotated[TextContentPartSchema, Tag("text")],
        Annotated[RefusalPartSchema, Tag("refusal")],
        Annotated[ReasoningPartSchema, Tag("reasoning")],
        Annotated[RedactedReasoningPartSchema, Tag("redacted_reasoning")],
    ],
    Discriminator(lambda m: get_discriminator(m, "type", "type")),
]


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContentTypedDict",
    Union[str, List[DeploymentCreateMetricContentDeploymentsMetrics2TypedDict]],
)
r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContent = (
    TypeAliasType(
        "DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContent",
        Union[str, List[DeploymentCreateMetricContentDeploymentsMetrics2]],
    )
)
r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyRole = Literal[
    "assistant",
]
r"""The role of the messages author, in this case `assistant`."""


class DeploymentCreateMetricMessagesAudioTypedDict(TypedDict):
    r"""Data about a previous audio response from the model."""

    id: str
    r"""Unique identifier for a previous audio response from the model."""


class DeploymentCreateMetricMessagesAudio(BaseModel):
    r"""Data about a previous audio response from the model."""

    id: str
    r"""Unique identifier for a previous audio response from the model."""


DeploymentCreateMetricMessagesType = Literal["function",]
r"""The type of the tool. Currently, only `function` is supported."""


class DeploymentCreateMetricMessagesFunctionTypedDict(TypedDict):
    name: NotRequired[str]
    r"""The name of the function to call."""
    arguments: NotRequired[str]
    r"""The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON, and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function."""


class DeploymentCreateMetricMessagesFunction(BaseModel):
    name: Optional[str] = None
    r"""The name of the function to call."""

    arguments: Optional[str] = None
    r"""The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON, and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function."""


class DeploymentCreateMetricMessagesToolCallsTypedDict(TypedDict):
    id: str
    r"""The ID of the tool call."""
    type: DeploymentCreateMetricMessagesType
    r"""The type of the tool. Currently, only `function` is supported."""
    function: DeploymentCreateMetricMessagesFunctionTypedDict
    thought_signature: NotRequired[str]
    r"""Encrypted representation of the model internal reasoning state during function calling. Required by Gemini 3 models when continuing a conversation after a tool call."""


class DeploymentCreateMetricMessagesToolCalls(BaseModel):
    id: str
    r"""The ID of the tool call."""

    type: DeploymentCreateMetricMessagesType
    r"""The type of the tool. Currently, only `function` is supported."""

    function: DeploymentCreateMetricMessagesFunction

    thought_signature: Optional[str] = None
    r"""Encrypted representation of the model internal reasoning state during function calling. Required by Gemini 3 models when continuing a conversation after a tool call."""


class DeploymentCreateMetricMessagesAssistantMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyRole
    r"""The role of the messages author, in this case `assistant`."""
    content: NotRequired[
        Nullable[
            DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContentTypedDict
        ]
    ]
    r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""
    refusal: NotRequired[Nullable[str]]
    r"""The refusal message by the assistant."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""
    audio: NotRequired[Nullable[DeploymentCreateMetricMessagesAudioTypedDict]]
    r"""Data about a previous audio response from the model."""
    tool_calls: NotRequired[List[DeploymentCreateMetricMessagesToolCallsTypedDict]]
    r"""The tool calls generated by the model, such as function calls."""


class DeploymentCreateMetricMessagesAssistantMessage(BaseModel):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyRole
    r"""The role of the messages author, in this case `assistant`."""

    content: OptionalNullable[
        DeploymentCreateMetricMessagesDeploymentsMetricsRequestRequestBodyContent
    ] = UNSET
    r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""

    refusal: OptionalNullable[str] = UNSET
    r"""The refusal message by the assistant."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""

    audio: OptionalNullable[DeploymentCreateMetricMessagesAudio] = UNSET
    r"""Data about a previous audio response from the model."""

    tool_calls: Optional[List[DeploymentCreateMetricMessagesToolCalls]] = None
    r"""The tool calls generated by the model, such as function calls."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = ["content", "refusal", "name", "audio", "tool_calls"]
        nullable_fields = ["content", "refusal", "audio"]
        null_default_fields = []

        serialized = handler(self)

        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            serialized.pop(k, None)

            optional_nullable = k in optional_fields and k in nullable_fields
            is_set = (
                self.__pydantic_fields_set__.intersection({n})
                or k in null_default_fields
            )  # pylint: disable=no-member

            if val is not None and val != UNSET_SENTINEL:
                m[k] = val
            elif val != UNSET_SENTINEL and (
                not k in optional_fields or (optional_nullable and is_set)
            ):
                m[k] = val

        return m


DeploymentCreateMetricMessagesDeploymentsMetricsRequestRole = Literal["user",]
r"""The role of the messages author, in this case `user`."""


DeploymentCreateMetric2Type = Literal["file",]
r"""The type of the content part. Always `file`."""


DeploymentCreateMetric2DeploymentsMetricsType = Literal["ephemeral",]
r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""


DeploymentCreateMetric2TTL = Literal[
    "5m",
    "1h",
]
r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

- `5m`: 5 minutes
- `1h`: 1 hour

Defaults to `5m`. Only supported by `Anthropic` Claude models.
"""


class DeploymentCreateMetric2CacheControlTypedDict(TypedDict):
    type: DeploymentCreateMetric2DeploymentsMetricsType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""
    ttl: NotRequired[DeploymentCreateMetric2TTL]
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetric2CacheControl(BaseModel):
    type: DeploymentCreateMetric2DeploymentsMetricsType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""

    ttl: Optional[DeploymentCreateMetric2TTL] = "5m"
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetric24TypedDict(TypedDict):
    type: DeploymentCreateMetric2Type
    r"""The type of the content part. Always `file`."""
    file: FileContentPartSchemaTypedDict
    r"""File data for the content part. Must contain either file_data or uri, but not both."""
    cache_control: NotRequired[DeploymentCreateMetric2CacheControlTypedDict]


class DeploymentCreateMetric24(BaseModel):
    type: DeploymentCreateMetric2Type
    r"""The type of the content part. Always `file`."""

    file: FileContentPartSchema
    r"""File data for the content part. Must contain either file_data or uri, but not both."""

    cache_control: Optional[DeploymentCreateMetric2CacheControl] = None


DeploymentCreateMetricContent2TypedDict = TypeAliasType(
    "DeploymentCreateMetricContent2TypedDict",
    Union[
        AudioContentPartSchemaTypedDict,
        TextContentPartSchemaTypedDict,
        ImageContentPartSchemaTypedDict,
        DeploymentCreateMetric24TypedDict,
    ],
)


DeploymentCreateMetricContent2 = Annotated[
    Union[
        Annotated[TextContentPartSchema, Tag("text")],
        Annotated[ImageContentPartSchema, Tag("image_url")],
        Annotated[AudioContentPartSchema, Tag("input_audio")],
        Annotated[DeploymentCreateMetric24, Tag("file")],
    ],
    Discriminator(lambda m: get_discriminator(m, "type", "type")),
]


DeploymentCreateMetricMessagesDeploymentsMetricsRequestContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsRequestContentTypedDict",
    Union[str, List[DeploymentCreateMetricContent2TypedDict]],
)
r"""The contents of the user message."""


DeploymentCreateMetricMessagesDeploymentsMetricsRequestContent = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsRequestContent",
    Union[str, List[DeploymentCreateMetricContent2]],
)
r"""The contents of the user message."""


class DeploymentCreateMetricMessagesUserMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRole
    r"""The role of the messages author, in this case `user`."""
    content: DeploymentCreateMetricMessagesDeploymentsMetricsRequestContentTypedDict
    r"""The contents of the user message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class DeploymentCreateMetricMessagesUserMessage(BaseModel):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRequestRole
    r"""The role of the messages author, in this case `user`."""

    content: DeploymentCreateMetricMessagesDeploymentsMetricsRequestContent
    r"""The contents of the user message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


DeploymentCreateMetricMessagesDeploymentsMetricsRole = Literal["developer",]
r"""The role of the messages author, in this case  `developer`."""


DeploymentCreateMetricMessagesDeploymentsMetricsContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsContentTypedDict",
    Union[str, List[TextContentPartSchemaTypedDict]],
)
r"""The contents of the developer message."""


DeploymentCreateMetricMessagesDeploymentsMetricsContent = TypeAliasType(
    "DeploymentCreateMetricMessagesDeploymentsMetricsContent",
    Union[str, List[TextContentPartSchema]],
)
r"""The contents of the developer message."""


class DeploymentCreateMetricMessagesDeveloperMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRole
    r"""The role of the messages author, in this case  `developer`."""
    content: DeploymentCreateMetricMessagesDeploymentsMetricsContentTypedDict
    r"""The contents of the developer message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class DeploymentCreateMetricMessagesDeveloperMessage(BaseModel):
    role: DeploymentCreateMetricMessagesDeploymentsMetricsRole
    r"""The role of the messages author, in this case  `developer`."""

    content: DeploymentCreateMetricMessagesDeploymentsMetricsContent
    r"""The contents of the developer message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


DeploymentCreateMetricMessagesRole = Literal["system",]
r"""The role of the messages author, in this case `system`."""


DeploymentCreateMetricMessagesContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesContentTypedDict",
    Union[str, List[TextContentPartSchemaTypedDict]],
)
r"""The contents of the system message."""


DeploymentCreateMetricMessagesContent = TypeAliasType(
    "DeploymentCreateMetricMessagesContent", Union[str, List[TextContentPartSchema]]
)
r"""The contents of the system message."""


class DeploymentCreateMetricMessagesSystemMessageTypedDict(TypedDict):
    r"""Developer-provided instructions that the model should follow, regardless of messages sent by the user."""

    role: DeploymentCreateMetricMessagesRole
    r"""The role of the messages author, in this case `system`."""
    content: DeploymentCreateMetricMessagesContentTypedDict
    r"""The contents of the system message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class DeploymentCreateMetricMessagesSystemMessage(BaseModel):
    r"""Developer-provided instructions that the model should follow, regardless of messages sent by the user."""

    role: DeploymentCreateMetricMessagesRole
    r"""The role of the messages author, in this case `system`."""

    content: DeploymentCreateMetricMessagesContent
    r"""The contents of the system message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


DeploymentCreateMetricMessagesTypedDict = TypeAliasType(
    "DeploymentCreateMetricMessagesTypedDict",
    Union[
        DeploymentCreateMetricMessagesSystemMessageTypedDict,
        DeploymentCreateMetricMessagesDeveloperMessageTypedDict,
        DeploymentCreateMetricMessagesUserMessageTypedDict,
        DeploymentCreateMetricMessagesToolMessageTypedDict,
        DeploymentCreateMetricMessagesAssistantMessageTypedDict,
    ],
)


DeploymentCreateMetricMessages = Annotated[
    Union[
        Annotated[DeploymentCreateMetricMessagesSystemMessage, Tag("system")],
        Annotated[DeploymentCreateMetricMessagesDeveloperMessage, Tag("developer")],
        Annotated[DeploymentCreateMetricMessagesUserMessage, Tag("user")],
        Annotated[DeploymentCreateMetricMessagesAssistantMessage, Tag("assistant")],
        Annotated[DeploymentCreateMetricMessagesToolMessage, Tag("tool")],
    ],
    Discriminator(lambda m: get_discriminator(m, "role", "role")),
]


DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyRole = Literal["tool",]
r"""The role of the messages author, in this case tool."""


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices52TypedDict = (
    TextContentPartSchemaTypedDict
)


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices52 = (
    TextContentPartSchema
)


DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContentTypedDict",
    Union[
        str,
        List[
            DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices52TypedDict
        ],
    ],
)
r"""The contents of the tool message."""


DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContent = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContent",
    Union[
        str,
        List[
            DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices52
        ],
    ],
)
r"""The contents of the tool message."""


DeploymentCreateMetricChoicesType = Literal["ephemeral",]
r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""


ChoicesTTL = Literal[
    "5m",
    "1h",
]
r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

- `5m`: 5 minutes
- `1h`: 1 hour

Defaults to `5m`. Only supported by `Anthropic` Claude models.
"""


class ChoicesCacheControlTypedDict(TypedDict):
    type: DeploymentCreateMetricChoicesType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""
    ttl: NotRequired[ChoicesTTL]
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class ChoicesCacheControl(BaseModel):
    type: DeploymentCreateMetricChoicesType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""

    ttl: Optional[ChoicesTTL] = "5m"
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class ChoicesToolMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyRole
    r"""The role of the messages author, in this case tool."""
    content: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContentTypedDict
    r"""The contents of the tool message."""
    tool_call_id: Nullable[str]
    r"""Tool call that this message is responding to."""
    cache_control: NotRequired[ChoicesCacheControlTypedDict]


class ChoicesToolMessage(BaseModel):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyRole
    r"""The role of the messages author, in this case tool."""

    content: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRequestBodyContent
    r"""The contents of the tool message."""

    tool_call_id: Nullable[str]
    r"""Tool call that this message is responding to."""

    cache_control: Optional[ChoicesCacheControl] = None

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = ["cache_control"]
        nullable_fields = ["tool_call_id"]
        null_default_fields = []

        serialized = handler(self)

        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            serialized.pop(k, None)

            optional_nullable = k in optional_fields and k in nullable_fields
            is_set = (
                self.__pydantic_fields_set__.intersection({n})
                or k in null_default_fields
            )  # pylint: disable=no-member

            if val is not None and val != UNSET_SENTINEL:
                m[k] = val
            elif val != UNSET_SENTINEL and (
                not k in optional_fields or (optional_nullable and is_set)
            ):
                m[k] = val

        return m


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices2TypedDict = TypeAliasType(
    "DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices2TypedDict",
    Union[
        RefusalPartSchemaTypedDict,
        RedactedReasoningPartSchemaTypedDict,
        TextContentPartSchemaTypedDict,
        ReasoningPartSchemaTypedDict,
    ],
)


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices2 = Annotated[
    Union[
        Annotated[TextContentPartSchema, Tag("text")],
        Annotated[RefusalPartSchema, Tag("refusal")],
        Annotated[ReasoningPartSchema, Tag("reasoning")],
        Annotated[RedactedReasoningPartSchema, Tag("redacted_reasoning")],
    ],
    Discriminator(lambda m: get_discriminator(m, "type", "type")),
]


DeploymentCreateMetricChoicesDeploymentsMetricsRequestContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsRequestContentTypedDict",
    Union[
        str,
        List[
            DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices2TypedDict
        ],
    ],
)
r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""


DeploymentCreateMetricChoicesDeploymentsMetricsRequestContent = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsRequestContent",
    Union[
        str,
        List[DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBodyChoices2],
    ],
)
r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""


DeploymentCreateMetricChoicesDeploymentsMetricsRequestRole = Literal["assistant",]
r"""The role of the messages author, in this case `assistant`."""


class ChoicesAudioTypedDict(TypedDict):
    r"""Data about a previous audio response from the model."""

    id: str
    r"""Unique identifier for a previous audio response from the model."""


class ChoicesAudio(BaseModel):
    r"""Data about a previous audio response from the model."""

    id: str
    r"""Unique identifier for a previous audio response from the model."""


ChoicesType = Literal["function",]
r"""The type of the tool. Currently, only `function` is supported."""


class ChoicesFunctionTypedDict(TypedDict):
    name: NotRequired[str]
    r"""The name of the function to call."""
    arguments: NotRequired[str]
    r"""The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON, and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function."""


class ChoicesFunction(BaseModel):
    name: Optional[str] = None
    r"""The name of the function to call."""

    arguments: Optional[str] = None
    r"""The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON, and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function."""


class ChoicesToolCallsTypedDict(TypedDict):
    id: str
    r"""The ID of the tool call."""
    type: ChoicesType
    r"""The type of the tool. Currently, only `function` is supported."""
    function: ChoicesFunctionTypedDict
    thought_signature: NotRequired[str]
    r"""Encrypted representation of the model internal reasoning state during function calling. Required by Gemini 3 models when continuing a conversation after a tool call."""


class ChoicesToolCalls(BaseModel):
    id: str
    r"""The ID of the tool call."""

    type: ChoicesType
    r"""The type of the tool. Currently, only `function` is supported."""

    function: ChoicesFunction

    thought_signature: Optional[str] = None
    r"""Encrypted representation of the model internal reasoning state during function calling. Required by Gemini 3 models when continuing a conversation after a tool call."""


class ChoicesAssistantMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRole
    r"""The role of the messages author, in this case `assistant`."""
    content: NotRequired[
        Nullable[DeploymentCreateMetricChoicesDeploymentsMetricsRequestContentTypedDict]
    ]
    r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""
    refusal: NotRequired[Nullable[str]]
    r"""The refusal message by the assistant."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""
    audio: NotRequired[Nullable[ChoicesAudioTypedDict]]
    r"""Data about a previous audio response from the model."""
    tool_calls: NotRequired[List[ChoicesToolCallsTypedDict]]
    r"""The tool calls generated by the model, such as function calls."""


class ChoicesAssistantMessage(BaseModel):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRequestRole
    r"""The role of the messages author, in this case `assistant`."""

    content: OptionalNullable[
        DeploymentCreateMetricChoicesDeploymentsMetricsRequestContent
    ] = UNSET
    r"""The contents of the assistant message. Required unless `tool_calls` or `function_call` is specified."""

    refusal: OptionalNullable[str] = UNSET
    r"""The refusal message by the assistant."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""

    audio: OptionalNullable[ChoicesAudio] = UNSET
    r"""Data about a previous audio response from the model."""

    tool_calls: Optional[List[ChoicesToolCalls]] = None
    r"""The tool calls generated by the model, such as function calls."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = ["content", "refusal", "name", "audio", "tool_calls"]
        nullable_fields = ["content", "refusal", "audio"]
        null_default_fields = []

        serialized = handler(self)

        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            serialized.pop(k, None)

            optional_nullable = k in optional_fields and k in nullable_fields
            is_set = (
                self.__pydantic_fields_set__.intersection({n})
                or k in null_default_fields
            )  # pylint: disable=no-member

            if val is not None and val != UNSET_SENTINEL:
                m[k] = val
            elif val != UNSET_SENTINEL and (
                not k in optional_fields or (optional_nullable and is_set)
            ):
                m[k] = val

        return m


DeploymentCreateMetricChoicesDeploymentsMetricsRole = Literal["user",]
r"""The role of the messages author, in this case `user`."""


DeploymentCreateMetric2DeploymentsMetricsRequestType = Literal["file",]
r"""The type of the content part. Always `file`."""


DeploymentCreateMetric2DeploymentsMetricsRequestRequestBodyType = Literal["ephemeral",]
r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""


DeploymentCreateMetric2DeploymentsMetricsTTL = Literal[
    "5m",
    "1h",
]
r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

- `5m`: 5 minutes
- `1h`: 1 hour

Defaults to `5m`. Only supported by `Anthropic` Claude models.
"""


class DeploymentCreateMetric2DeploymentsMetricsCacheControlTypedDict(TypedDict):
    type: DeploymentCreateMetric2DeploymentsMetricsRequestRequestBodyType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""
    ttl: NotRequired[DeploymentCreateMetric2DeploymentsMetricsTTL]
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetric2DeploymentsMetricsCacheControl(BaseModel):
    type: DeploymentCreateMetric2DeploymentsMetricsRequestRequestBodyType
    r"""Create a cache control breakpoint at this content block. Accepts only the value \"ephemeral\"."""

    ttl: Optional[DeploymentCreateMetric2DeploymentsMetricsTTL] = "5m"
    r"""The time-to-live for the cache control breakpoint. This may be one of the following values:

    - `5m`: 5 minutes
    - `1h`: 1 hour

    Defaults to `5m`. Only supported by `Anthropic` Claude models.
    """


class DeploymentCreateMetric2DeploymentsMetrics4TypedDict(TypedDict):
    type: DeploymentCreateMetric2DeploymentsMetricsRequestType
    r"""The type of the content part. Always `file`."""
    file: FileContentPartSchemaTypedDict
    r"""File data for the content part. Must contain either file_data or uri, but not both."""
    cache_control: NotRequired[
        DeploymentCreateMetric2DeploymentsMetricsCacheControlTypedDict
    ]


class DeploymentCreateMetric2DeploymentsMetrics4(BaseModel):
    type: DeploymentCreateMetric2DeploymentsMetricsRequestType
    r"""The type of the content part. Always `file`."""

    file: FileContentPartSchema
    r"""File data for the content part. Must contain either file_data or uri, but not both."""

    cache_control: Optional[DeploymentCreateMetric2DeploymentsMetricsCacheControl] = (
        None
    )


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBody2TypedDict = (
    TypeAliasType(
        "DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBody2TypedDict",
        Union[
            AudioContentPartSchemaTypedDict,
            TextContentPartSchemaTypedDict,
            ImageContentPartSchemaTypedDict,
            DeploymentCreateMetric2DeploymentsMetrics4TypedDict,
        ],
    )
)


DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBody2 = Annotated[
    Union[
        Annotated[TextContentPartSchema, Tag("text")],
        Annotated[ImageContentPartSchema, Tag("image_url")],
        Annotated[AudioContentPartSchema, Tag("input_audio")],
        Annotated[DeploymentCreateMetric2DeploymentsMetrics4, Tag("file")],
    ],
    Discriminator(lambda m: get_discriminator(m, "type", "type")),
]


DeploymentCreateMetricChoicesDeploymentsMetricsContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsContentTypedDict",
    Union[
        str,
        List[
            DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBody2TypedDict
        ],
    ],
)
r"""The contents of the user message."""


DeploymentCreateMetricChoicesDeploymentsMetricsContent = TypeAliasType(
    "DeploymentCreateMetricChoicesDeploymentsMetricsContent",
    Union[
        str, List[DeploymentCreateMetricContentDeploymentsMetricsRequestRequestBody2]
    ],
)
r"""The contents of the user message."""


class ChoicesUserMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRole
    r"""The role of the messages author, in this case `user`."""
    content: DeploymentCreateMetricChoicesDeploymentsMetricsContentTypedDict
    r"""The contents of the user message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class ChoicesUserMessage(BaseModel):
    role: DeploymentCreateMetricChoicesDeploymentsMetricsRole
    r"""The role of the messages author, in this case `user`."""

    content: DeploymentCreateMetricChoicesDeploymentsMetricsContent
    r"""The contents of the user message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


DeploymentCreateMetricChoicesRole = Literal["developer",]
r"""The role of the messages author, in this case  `developer`."""


DeploymentCreateMetricChoicesContentTypedDict = TypeAliasType(
    "DeploymentCreateMetricChoicesContentTypedDict",
    Union[str, List[TextContentPartSchemaTypedDict]],
)
r"""The contents of the developer message."""


DeploymentCreateMetricChoicesContent = TypeAliasType(
    "DeploymentCreateMetricChoicesContent", Union[str, List[TextContentPartSchema]]
)
r"""The contents of the developer message."""


class ChoicesDeveloperMessageTypedDict(TypedDict):
    role: DeploymentCreateMetricChoicesRole
    r"""The role of the messages author, in this case  `developer`."""
    content: DeploymentCreateMetricChoicesContentTypedDict
    r"""The contents of the developer message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class ChoicesDeveloperMessage(BaseModel):
    role: DeploymentCreateMetricChoicesRole
    r"""The role of the messages author, in this case  `developer`."""

    content: DeploymentCreateMetricChoicesContent
    r"""The contents of the developer message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


ChoicesRole = Literal["system",]
r"""The role of the messages author, in this case `system`."""


ChoicesContentTypedDict = TypeAliasType(
    "ChoicesContentTypedDict", Union[str, List[TextContentPartSchemaTypedDict]]
)
r"""The contents of the system message."""


ChoicesContent = TypeAliasType(
    "ChoicesContent", Union[str, List[TextContentPartSchema]]
)
r"""The contents of the system message."""


class ChoicesSystemMessageTypedDict(TypedDict):
    r"""Developer-provided instructions that the model should follow, regardless of messages sent by the user."""

    role: ChoicesRole
    r"""The role of the messages author, in this case `system`."""
    content: ChoicesContentTypedDict
    r"""The contents of the system message."""
    name: NotRequired[str]
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


class ChoicesSystemMessage(BaseModel):
    r"""Developer-provided instructions that the model should follow, regardless of messages sent by the user."""

    role: ChoicesRole
    r"""The role of the messages author, in this case `system`."""

    content: ChoicesContent
    r"""The contents of the system message."""

    name: Optional[str] = None
    r"""An optional name for the participant. Provides the model information to differentiate between participants of the same role."""


ChoicesTypedDict = TypeAliasType(
    "ChoicesTypedDict",
    Union[
        ChoicesSystemMessageTypedDict,
        ChoicesDeveloperMessageTypedDict,
        ChoicesUserMessageTypedDict,
        ChoicesToolMessageTypedDict,
        ChoicesAssistantMessageTypedDict,
    ],
)


Choices = Annotated[
    Union[
        Annotated[ChoicesSystemMessage, Tag("system")],
        Annotated[ChoicesDeveloperMessage, Tag("developer")],
        Annotated[ChoicesUserMessage, Tag("user")],
        Annotated[ChoicesAssistantMessage, Tag("assistant")],
        Annotated[ChoicesToolMessage, Tag("tool")],
    ],
    Discriminator(lambda m: get_discriminator(m, "role", "role")),
]


class DeploymentCreateMetricFeedbackTypedDict(TypedDict):
    r"""Feedback from the user on the completion"""

    score: int
    r"""The feedback score. This allow you to come with specific logic on what a `score` number means"""


class DeploymentCreateMetricFeedback(BaseModel):
    r"""Feedback from the user on the completion"""

    score: int
    r"""The feedback score. This allow you to come with specific logic on what a `score` number means"""


class DeploymentCreateMetricRequestBodyTypedDict(TypedDict):
    r"""The deployment request payload"""

    metadata: NotRequired[Dict[str, Any]]
    r"""Your own custom key-value pairs can be attached to the logs. This is useful for storing additional information related to your interactions with the LLM providers or specifics within your application."""
    usage: NotRequired[DeploymentCreateMetricUsageTypedDict]
    r"""Usage statistics to add to the deployment"""
    performance: NotRequired[PerformanceTypedDict]
    messages: NotRequired[List[DeploymentCreateMetricMessagesTypedDict]]
    r"""A list of messages sent to the model."""
    choices: NotRequired[List[ChoicesTypedDict]]
    r"""A list of completion choices. If you are using a `completion` model then you must provide the `completion content` with the chat completion format"""
    feedback: NotRequired[DeploymentCreateMetricFeedbackTypedDict]
    r"""Feedback from the user on the completion"""


class DeploymentCreateMetricRequestBody(BaseModel):
    r"""The deployment request payload"""

    metadata: Optional[Dict[str, Any]] = None
    r"""Your own custom key-value pairs can be attached to the logs. This is useful for storing additional information related to your interactions with the LLM providers or specifics within your application."""

    usage: Optional[DeploymentCreateMetricUsage] = None
    r"""Usage statistics to add to the deployment"""

    performance: Optional[Performance] = None

    messages: Optional[List[DeploymentCreateMetricMessages]] = None
    r"""A list of messages sent to the model."""

    choices: Optional[List[Choices]] = None
    r"""A list of completion choices. If you are using a `completion` model then you must provide the `completion content` with the chat completion format"""

    feedback: Optional[DeploymentCreateMetricFeedback] = None
    r"""Feedback from the user on the completion"""


class DeploymentCreateMetricRequestTypedDict(TypedDict):
    id: str
    r"""Deployment ID"""
    request_body: DeploymentCreateMetricRequestBodyTypedDict
    r"""The deployment request payload"""


class DeploymentCreateMetricRequest(BaseModel):
    id: Annotated[
        str, FieldMetadata(path=PathParamMetadata(style="simple", explode=False))
    ]
    r"""Deployment ID"""

    request_body: Annotated[
        DeploymentCreateMetricRequestBody,
        FieldMetadata(request=RequestMetadata(media_type="application/json")),
    ]
    r"""The deployment request payload"""


class DeploymentCreateMetricResponseBodyTypedDict(TypedDict):
    r"""Successful operation"""

    success: bool
    r"""Whether the request was successful"""


class DeploymentCreateMetricResponseBody(BaseModel):
    r"""Successful operation"""

    success: bool
    r"""Whether the request was successful"""
